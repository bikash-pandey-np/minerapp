import{r as i,d as r,j as e}from"./app-9776f975.js";import u from"./Layout-5b430019.js";import{S as c}from"./sweetalert2.esm.all-073c5cf9.js";/* empty css            */import"./ReactToastify-ccecd9fe.js";import"./iconBase-549d7331.js";import"./Helmet-009dc957.js";import"./index-e82f3d28.js";const C=({payments:a,searchStatus:l})=>{console.log(a);const[o,n]=i.useState(""),d=i.useCallback(s=>{let t;clearTimeout(t),t=setTimeout(()=>{r.Inertia.get(route("admin.planPayments"),{search:s},{preserveState:!0,preserveScroll:!0,replace:!0})},300)},[]),x=s=>{const t=s.target.value;n(t),d(t)},m=s=>{c.fire({title:"Are you sure?",text:"You want to confirm this payment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, approve it!"}).then(t=>{t.isConfirmed&&r.Inertia.post(route("admin.approvePayment"),{id:s.id})})},h=s=>{c.fire({title:"Reject Payment",input:"textarea",inputLabel:"Reason for rejection",inputPlaceholder:"Enter your reason here...",showCancelButton:!0,confirmButtonText:"Reject",confirmButtonColor:"#d33",inputValidator:t=>{if(!t)return"You need to provide a reason!"}}).then(t=>{t.isConfirmed&&r.Inertia.post(route("admin.rejectPayment"),{id:s.id,reason:t.value})})};return e.jsx(u,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Search transactions, customers, or plans...",className:"input input-bordered w-full max-w-xs",value:o,onChange:x}),l&&e.jsx("button",{onClick:()=>{n(""),r.Inertia.get(route("admin.planPayments"),{},{preserveState:!0,preserveScroll:!0,replace:!0})},className:"btn btn-warning btn-sm ml-2 flex items-center gap-2",children:"Reset"})]})}),e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{className:"bg-base-300",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Transaction Details"}),e.jsx("th",{children:"Customer Details"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Miner Plan"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{className:"bg-base-100",children:a.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-4",children:"No records found"})}):a.data.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-sm font-medium",children:["ID: ",s.transaction_identifier]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Hash: ",s.txn_hash]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Date: ",s.new_created_at]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.customer.email}),e.jsxs("span",{className:"text-xs opacity-70",children:["Account: ",s.customer.account_id]})]})}),e.jsx("td",{children:e.jsxs("span",{className:"font-medium",children:[parseFloat(s.investment_amount).toFixed(2)," USDT"]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.miner_plan.name}),e.jsxs("span",{className:"text-xs opacity-70",children:["Hash Power: ",s.miner_plan.hash_power]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Duration: ",s.miner_plan.duration," days"]})]})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-sm ${s.status==="approved"?"badge-success text-white":s.status==="rejected"?"badge-error text-white":"badge-warning"}`,children:s.status})}),e.jsxs("td",{children:[s.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>m(s),children:"Approve"}),e.jsx("button",{className:"btn btn-sm btn-error",onClick:()=>h(s),children:"Reject"})]}),s.status==="approved"&&e.jsxs("span",{className:"text-xs opacity-70",children:["Approved at ",e.jsx("span",{className:"font-medium font-mono",children:s.approved_at})]}),s.status==="rejected"&&e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-xs opacity-70",children:["Reason: ",e.jsx("span",{className:"font-medium font-mono",children:s.reject_reason})]})})]})]},s.id))})]}),e.jsx("div",{className:"join mt-4 flex justify-center",children:a.links.map((s,t)=>e.jsx("button",{className:`join-item btn btn-sm ${s.active?"btn-active":""} ${s.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:s.label},onClick:()=>{s.url&&(window.location.href=s.url)}},t))})]})})};export{C as default};
