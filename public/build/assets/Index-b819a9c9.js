import{r,j as e,d as v}from"./app-9776f975.js";import{L as E}from"./Layout-a722a78a.js";import{i as M,g as w,f as R,h as B}from"./index-149b70ee.js";import{B as V,H as $,a as z,b as O,c as U}from"./index-bfa24fdc.js";import{H as G}from"./Helmet-009dc957.js";import{m as t,A as _}from"./index-e82f3d28.js";/* empty css            */import"./iconBase-549d7331.js";import"./ReactToastify-ccecd9fe.js";const se=({minerTransactions:c,filters:x,isMinerTransactionSearched:C,title:S})=>{const[a,j]=r.useState(null),[g,b]=r.useState(!1),[d,N]=r.useState({paymentDate:x.paymentDate||"",status:x.status||"",searchTerm:x.searchTerm||""}),[l,D]=r.useState(1),o=9,T={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},k={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{type:"spring",duration:.5}},exit:{opacity:0,scale:.8,transition:{duration:.3}}},i={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0}},h=(s,n)=>{N(L=>({...L,[s]:n}))},P=()=>{v.Inertia.get(route("miners.logs"),d,{preserveState:!0,replace:!0})},F=()=>{N({paymentDate:"",status:"",searchTerm:""}),v.Inertia.get(route("miners.logs"),{},{preserveState:!0,replace:!0})},I=s=>{console.log("modal opened"),j(s),b(!0),document.body.style.overflow="hidden"},m=()=>{b(!1),j(null),document.body.style.overflow="auto"};r.useEffect(()=>{const s=n=>{n.key==="Escape"&&m()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[]);const f=l*o,H=f-o,y=c.slice(H,f),p=Math.ceil(c.length/o),u=s=>{D(s)},A=s=>{switch(s){case"approved":return e.jsx(w,{className:"text-green-500 text-xl"});case"rejected":return e.jsx(B,{className:"text-red-500 text-xl"});default:return e.jsx(R,{className:"text-yellow-500 text-xl animate-spin"})}};return e.jsxs(E,{title:"Logs",description:"View all logs",children:[e.jsx(G,{children:e.jsx("title",{children:S})}),e.jsx("div",{className:`container mx-auto px-4 mb-[10rem] md:mb-[18rem] ${g?"blur-sm":""}`,children:e.jsxs("div",{className:"mt-4 text-gray-700",children:[e.jsx(t.div,{className:"mb-6 w-full",variants:i,initial:"hidden",animate:"visible",transition:{duration:.4},children:e.jsxs(t.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",variants:i,transition:{staggerChildren:.1},children:[e.jsxs(t.div,{className:"form-control w-full",variants:i,children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Payment Date"})}),e.jsx("input",{type:"date",className:"input input-bordered input-sm w-full",value:d.paymentDate,onChange:s=>h("paymentDate",s.target.value)})]}),e.jsxs(t.div,{className:"form-control w-full",variants:i,children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Payment Status"})}),e.jsxs("select",{className:"select select-bordered select-sm w-full",value:d.status,onChange:s=>h("status",s.target.value),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs(t.div,{className:"form-control w-full",variants:i,children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Search"})}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",className:"input input-bordered input-sm w-full",placeholder:"Search transactions...",value:d.searchTerm,onChange:s=>h("searchTerm",s.target.value)})})]}),e.jsx(t.div,{className:"form-control w-full flex flex-col justify-end",variants:i,children:e.jsxs("div",{className:"flex gap-2 h-[30px]",children:[e.jsx(_,{children:C&&e.jsx(t.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"btn btn-error btn-outline btn-sm flex-1 min-h-0 h-full hover:bg-error/20",onClick:F,children:"Reset"})}),e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn btn-primary btn-sm flex-1 min-h-0 h-full",onClick:P,children:"Apply"})]})})]})}),e.jsx("div",{className:"bg-base-200 p-4 rounded-lg mb-6",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",Math.min(y.length,o)," Records from ",c.length," Records"]})}),c.length===0?e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"card bg-white shadow-[0_0_15px_rgba(0,0,0,0.1)] hover:shadow-[0_0_20px_rgba(0,0,0,0.15)] transition-all duration-300 p-8",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Data Found"}),e.jsx("p",{className:"text-sm",children:"There are no transactions to display."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((s,n)=>e.jsx(t.div,{variants:T,initial:"hidden",animate:"visible",transition:{duration:.5,delay:n*.1},className:"card bg-white shadow-[0_0_15px_rgba(0,0,0,0.1)] hover:shadow-[0_0_20px_rgba(0,0,0,0.15)] transition-all duration-300 border border-gray-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Identifier:"}),e.jsxs("span",{className:"font-mono font-semibold",children:[" ",s.transaction_identifier]})]}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Amount:"}),e.jsxs("span",{className:"font-mono font-semibold",children:[" ",parseFloat(s.investment_amount).toFixed(2)," USDT"]})]}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"TXN Hash:"}),e.jsxs("span",{className:"font-mono font-semibold",children:[" ",s.txn_hash]})]}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsxs("span",{className:`capitalize ${s.status==="pending"?"text-yellow-500":"text-green-500"}`,children:["  ",s.status]})]}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Payment For:"}),e.jsxs("span",{className:"font-mono font-semibold",children:[" ",s.miner_plan.name," (",s.miner_plan.hash_power," GH/s)"]})]}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Plan Duration :"}),e.jsxs("span",{className:"font-mono font-semibold",children:[" ",s.miner_plan.duration," days"]})]}),e.jsxs("p",{className:"text-sm mb-1",children:[e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsxs("span",{className:"font-mono font-semibold",children:[" ",new Date(s.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})]})]}),e.jsx("div",{className:"card-actions justify-end mt-4",children:e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn btn-primary btn-sm",onClick:()=>I(s),children:"View Details"})})]})},s.id))}),p>1&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("div",{className:"join",children:[e.jsx("button",{className:"join-item btn btn-sm",onClick:()=>u(l-1),disabled:l===1,children:"«"}),[...Array(p)].map((s,n)=>e.jsx("button",{className:`join-item btn btn-sm ${l===n+1?"btn-active":""}`,onClick:()=>u(n+1),children:n+1},n)),e.jsx("button",{className:"join-item btn btn-sm",onClick:()=>u(l+1),disabled:l===p,children:"»"})]})})]})}),e.jsx(_,{children:g&&a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",onClick:m,children:e.jsx(t.div,{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl text-gray-800",variants:k,initial:"hidden",animate:"visible",exit:"exit",onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Transaction Details"}),e.jsx("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(M,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"text-xl text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Transaction ID"}),e.jsx("p",{className:"font-mono font-medium",children:a.transaction_identifier})]})]}),A(a.status)]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx($,{className:"text-xl text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Transaction Hash"}),e.jsx("p",{className:"font-mono font-medium break-all",children:a.txn_hash})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(z,{className:"text-xl text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Investment Amount"}),e.jsxs("p",{className:"font-mono font-medium",children:[parseFloat(a.investment_amount).toFixed(2)," USDT"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(O,{className:"text-xl text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Transaction Date"}),e.jsx("p",{className:"font-mono font-medium",children:new Date(a.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(U,{className:"text-xl text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Mining Plan"}),e.jsxs("p",{className:"font-medium",children:[a.miner_plan.name," - ",a.miner_plan.hash_power," GH/s",e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",a.miner_plan.duration," days)"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(w,{className:"text-xl text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Payment Status"}),e.jsx("p",{className:`font-medium capitalize ${a.status==="pending"?"text-yellow-500":a.status==="approved"?"text-green-500":"text-red-500"}`,children:a.status})]})]})]}),e.jsx("div",{className:"mt-6 text-right",children:e.jsx("button",{onClick:m,className:"btn btn-sm bg-gray-200 hover:bg-gray-300",children:"Close"})})]})})})})]})};export{se as default};
