import{r as l,d as n,j as e}from"./app-9776f975.js";import h from"./Layout-5b430019.js";import{S as r}from"./sweetalert2.esm.all-073c5cf9.js";/* empty css            */import"./ReactToastify-ccecd9fe.js";import"./iconBase-549d7331.js";import"./Helmet-009dc957.js";import"./index-e82f3d28.js";const y=({logs:a,searchStatus:i})=>{console.log(a);const[d,o]=l.useState(""),m=l.useCallback(t=>{let s;clearTimeout(s),s=setTimeout(()=>{n.Inertia.get(route("admin.withdraw"),{search:t},{preserveState:!0,preserveScroll:!0,replace:!0})},300)},[]),x=t=>{const s=t.target.value;o(s),m(s)},u=t=>{r.fire({title:"Are you sure?",text:"You want to process this withdrawal?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, process it!"}).then(s=>{s.isConfirmed&&n.Inertia.post(route("admin.processWithdraw",{identifier:t.identifier}))})},p=t=>{r.fire({title:"Are you sure?",text:"You want to mark this withdrawal as completed?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, complete it!"}).then(s=>{s.isConfirmed&&n.Inertia.post(route("admin.completeWithdraw",{identifier:t.identifier}))})},c=t=>{r.fire({title:"Reject Withdrawal",input:"textarea",inputLabel:"Reason for rejection",inputPlaceholder:"Enter your reason here...",showCancelButton:!0,confirmButtonText:"Reject",confirmButtonColor:"#d33",inputValidator:s=>{if(!s)return"You need to provide a reason!"}}).then(s=>{s.isConfirmed&&(console.log("rejecting",s.value),n.Inertia.post(route("admin.rejectWithdraw",{identifier:t.identifier}),{reason:s.value}))})};return e.jsx(h,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Search withdrawals...",className:"input input-bordered w-full max-w-xs",value:d,onChange:x}),i&&e.jsx("button",{onClick:()=>{o(""),n.Inertia.get(route("admin.withdraw"),{},{preserveState:!0,preserveScroll:!0,replace:!0})},className:"btn btn-warning btn-sm ml-2 flex items-center gap-2",children:"Reset"})]})}),e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{className:"bg-base-300",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Transaction Details"}),e.jsx("th",{children:"Customer Details"}),e.jsx("th",{children:"Amount Details"}),e.jsx("th",{children:"Wallet Address"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{className:"bg-base-100",children:a.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-4",children:"No records found"})}):a.data.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-sm font-medium",children:["ID: ",t.identifier]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Date: ",new Date(t.new_created_at).toLocaleString()]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:t.customer.email}),e.jsxs("span",{className:"text-xs opacity-70",children:["Account: ",t.customer.account_id]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Request: ",parseFloat(t.request_amount).toFixed(2)," USDT"]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Fee: ",parseFloat(t.fee).toFixed(2)," USDT"]}),e.jsxs("span",{className:"text-xs opacity-70",children:["Net: ",parseFloat(t.net_amount).toFixed(2)," USDT"]})]})}),e.jsx("td",{children:e.jsx("span",{className:"text-xs font-mono",children:t.trc_20_wallet_address})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-sm ${t.status==="completed"?"badge-success text-white":t.status==="rejected"?"badge-error text-white":t.status==="processing"?"badge-info text-white":"badge-warning"}`,children:t.status})}),e.jsxs("td",{children:[t.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-info",onClick:()=>u(t),children:"Process"}),e.jsx("button",{className:"btn btn-sm btn-error",onClick:()=>c(t),children:"Reject"})]}),t.status==="processing"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>p(t),children:"Complete"}),e.jsx("button",{className:"btn btn-sm btn-error",onClick:()=>c(t),children:"Reject"})]}),t.status==="completed"&&e.jsxs("span",{className:"text-xs opacity-70",children:["Completed at ",e.jsx("span",{className:"font-medium font-mono",children:new Date(t.completed_at).toLocaleString()})]}),t.status==="rejected"&&e.jsxs("span",{className:"text-xs opacity-70",children:["Reason: ",e.jsx("span",{className:"font-medium font-mono",children:t.remark})]})]})]},t.id))})]}),e.jsx("div",{className:"join mt-4 flex justify-center",children:a.links.map((t,s)=>e.jsx("button",{className:`join-item btn btn-sm ${t.active?"btn-active":""} ${t.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:t.label},onClick:()=>{t.url&&(window.location.href=t.url)}},s))})]})})};export{y as default};
