import{r as t,a as w,j as e,c as E}from"./app-9776f975.js";import{L as O}from"./Layout-a722a78a.js";import{H as S}from"./Helmet-009dc957.js";import{b as P}from"./index-149b70ee.js";import{m as T}from"./index-e82f3d28.js";/* empty css            */import"./iconBase-549d7331.js";import"./ReactToastify-ccecd9fe.js";const F=({title:p,email:f})=>{const[h,b]=t.useState(!1),[r,l]=t.useState(!1),[i,o]=t.useState(!1),[a,c]=t.useState(15),[n,d]=t.useState(!1);t.useState({});const{data:m,setData:j,post:y,errors:x}=w({email:f,otp:""});t.useEffect(()=>{let s;return i&&a>0?s=setInterval(()=>{c(g=>g-1)},1e3):a===0&&(l(!0),o(!1)),()=>clearInterval(s)},[i,a]);const u=async()=>{try{d(!0),(await E.post(route("miners.send-otp"))).data.success&&(b(!0),o(!0),c(15),l(!1))}catch(s){console.error("Error sending OTP:",s)}finally{d(!1)}},N=()=>{y(route("miners.verify-otp"),{onSuccess:()=>{navigate(route("miners.dashboard"))}})},v=()=>{r&&(l(!1),u())};return e.jsxs(O,{title:"Verify Email",description:"Verify Your Email",backHref:route("miners.dashboard"),children:[e.jsx(S,{children:e.jsx("title",{children:p})}),e.jsx("div",{className:"min-h-screen p-4",children:e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto mt-8",children:e.jsxs("div",{className:"card bg-base-100 shadow-xl border border-gray-200 relative",children:[n&&e.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsx("div",{className:"loading loading-spinner loading-lg text-primary"})}),e.jsxs("div",{className:"card-body items-center text-center p-8",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:e.jsx(P,{className:"w-10 h-10 text-primary"})}),e.jsx("h2",{className:"card-title text-xl font-mono text-primary font-bold mb-4",children:"Verify Your Email Address"}),e.jsxs("div",{className:"form-control w-full max-w-md mb-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Your Email Address"})}),e.jsx("input",{type:"email",value:m.email,className:"input input-bordered w-full",disabled:!0})]}),h?e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"form-control mb-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Enter OTP"})}),e.jsx("input",{type:"text",value:m.otp,onChange:s=>j("otp",s.target.value),className:"input input-bordered text-gray-800",placeholder:"Enter OTP"}),x.otp&&e.jsx("span",{className:"text-error text-sm mt-1 text-left",children:x.otp})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx("button",{className:"btn btn-primary",onClick:N,disabled:n,children:"Verify OTP"}),i&&!r&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"font-mono text-xl text-gray-800",children:[a,"s"]}),e.jsxs("span",{className:"text-xs text-gray-600",children:["You can resend OTP in ",a," seconds"]})]}),r&&e.jsx("button",{className:"btn btn-outline",onClick:v,disabled:n||!r,children:"Resend OTP"})]})]}):e.jsx("button",{className:"btn btn-primary",onClick:u,disabled:n,children:"Send OTP"})]})]})})})]})};export{F as default};
